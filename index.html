<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>A1‚ÄìB2 English Learning Hub</title>
  <style>
    :root { --bg:#eef3ff; --card:#ffffffee; --text:#0f172a; --accent:#0b2e78; --line:#c9d7ff; font-family:"Candara Light","Candara","Segoe UI",sans-serif; }
    * { box-sizing: border-box; }
    body { margin:0; background:linear-gradient(180deg,#f8faff,#eaf0ff); color:var(--text); font-weight:600; }
    .topbar { position:sticky; top:0; z-index:30; backdrop-filter:blur(12px); background:#f8fbffdd; border-bottom:1px solid var(--line); }
    .topbar-inner { max-width:1100px; margin:0 auto; padding:10px 16px; display:flex; align-items:center; justify-content:space-between; position:relative; }
    .menu-btn, button, .link-btn, .lang-choice { min-height:44px; border-radius:12px; border:1px solid var(--line); background:#fff; color:var(--text); padding:10px 14px; font-size:16px; font-weight:700; cursor:pointer; transition:all .25s ease; }
    button:hover,.menu-btn:hover,.link-btn:hover,.lang-choice:hover { box-shadow:0 8px 20px #0f172a1a; transform:translateY(-1px); }
    .menu-btn,.btnbar button.active,#checkBtn,#resetBtn,#copyBtn,#testBtn,.link-btn { background:var(--accent); color:#fff; border-color:transparent; }
    .menu { position:absolute; top:58px; right:16px; width:min(290px,85vw); background:#fff; border:1px solid var(--line); border-radius:16px; padding:8px; box-shadow:0 14px 28px #0f172a22; opacity:0; pointer-events:none; transform:translateY(-8px); transition:all .25s ease; }
    .menu.open { opacity:1; pointer-events:auto; transform:translateY(0); }
    .menu button { width:100%; text-align:left; margin-bottom:6px; }
    .wrap { max-width:1100px; margin:0 auto; padding:18px 14px 30px; }
    .section { display:none; opacity:0; transform:translateY(10px); transition:opacity .3s ease, transform .3s ease; margin:0; padding:0; min-height:0; }
    .section.active { display:block; opacity:1; transform:translateY(0); }
    #testSection .card { margin-top:0; }
    .card { background:var(--card); border:1px solid var(--line); border-radius:18px; padding:16px; margin:10px 0; box-shadow:0 10px 24px #8ba1db1a; }
    .hero { text-align:center; min-height:58vh; display:flex; flex-direction:column; justify-content:center; gap:12px; }
    .hero h1 { font-size:clamp(28px,7vw,46px); margin:0; }
    .btnbar { display:flex; gap:8px; flex-wrap:wrap; margin:8px 0; }
    .grid { display:grid; gap:10px; }
    .task-card .result { display:none; margin-top:8px; padding:8px; border-radius:12px; }
    .result.ok { background:#e6f7ec; color:#0f6b35; }
    .result.bad { background:#feecec; color:#9f1d2a; }
    input[type="text"],select { width:100%; min-height:44px; border:1px solid var(--line); border-radius:12px; padding:10px; font-size:16px; margin:8px 0; }
    .table-wrap { overflow:auto; max-height:65vh; border-radius:12px; border:1px solid var(--line); }
    table { width:100%; border-collapse:collapse; background:#fff; }
    th,td { padding:10px; border-bottom:1px solid #edf1ff; text-align:left; white-space:nowrap; }
    .vocab-list { max-height:55vh; overflow:auto; }
    .vocab-item { padding:8px 10px; border-bottom:1px solid #eef2ff; }
    .modal { position:fixed; inset:0; background:#0f172a66; display:none; align-items:center; justify-content:center; z-index:60; }
    .modal.open { display:flex; }
    .modal-card { width:min(360px,92vw); background:#fff; border-radius:16px; padding:16px; border:1px solid var(--line); }
    .lang-choice { width:100%; margin:6px 0; font-size:20px; }

    .catalog-wrap { display:grid; gap:10px; margin:10px 0 14px; }
    .catalog-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(170px,1fr)); gap:10px; }
    .catalog-grid button { width:100%; text-align:left; }
    .catalog-back { margin-bottom:10px; }
    .task-option { display:block; margin:6px 0; padding:4px 0; }

    #homeSection { justify-content:center; }
    #homeSection.active { display:flex; }
    #homeSection .hero { width:100%; max-width:1000px; margin:10px auto; padding:24px; }
    #feedbackLink { border-radius:18px; padding:12px 22px; }
    @media (max-width: 700px) {
      .wrap { padding:14px 12px 24px; }
      #homeSection .hero { max-width:100%; padding:18px 14px; }
      #feedbackLink { width:100%; text-align:center; }
      #homeSection .hero > div { width:100%; }
    }
  </style>
</head>
<body>
<nav class="topbar">
  <div class="topbar-inner">
    <strong>A1‚ÄìB2 English</strong>
    <button id="menuBtn" class="menu-btn" aria-expanded="false"></button>
    <div id="menu" class="menu">
      <button data-go="home" data-i18n="menuHome"></button>
      <button data-go="theory" data-i18n="menuTheory"></button>
      <button data-go="tasks" data-i18n="menuTasks"></button>
      <button data-go="test" data-i18n="menuTest"></button>
      <button data-go="verbs" data-i18n="menuVerbs"></button>
      <button data-go="vocab" data-i18n="menuVocab"></button>
      <button id="langOpenBtn" data-i18n="menuLang"></button>
    </div>
  </div>
</nav>
<div class="wrap">
  <section id="homeSection" class="section active"><div class="card hero"><h1 data-i18n="homeTitle"></h1><p data-i18n="homeText"></p><div style="display:flex;justify-content:center;"><a id="feedbackLink" class="link-btn" href="mailto:mailoftheshop@gmail.com?subject=Feedback%20A2%20English&body=Hello%2C%20I%20want%20to%20share%20feedback%20about%20the%20A2%20English%20page."></a></div></div></section>
  <section id="theorySection" class="section"><div class="card"><h2 data-i18n="theoryTitle"></h2><div id="theoryCatalog"></div><div id="theoryTopicView" style="display:none"></div></div></section>
  <section id="tasksSection" class="section"><div class="card"><h2 id="taskTitle"></h2><div id="tasksCatalog" class="catalog-wrap"></div><div class="btnbar"><button id="checkBtn"></button><button id="resetBtn"></button><button id="copyBtn"></button></div><p data-i18n="taskHint"></p><div id="tasksList" class="grid"></div><div id="overall" class="result"></div></div></section>
  <section id="testSection" class="section"><div class="card"><h2 id="testTitle"></h2><div id="testList" class="grid"></div><button id="testBtn"></button><div id="testResult" style="margin-top:10px;font-weight:700;"></div></div></section>
  <section id="verbsSection" class="section"><div class="card"><h2 data-i18n="verbsTitle"></h2><input id="verbSearch" type="text"/><div class="table-wrap"><table><thead><tr><th>V1</th><th>V2</th><th>V3</th><th id="translationCol"></th></tr></thead><tbody id="verbsBody"></tbody></table></div></div></section>
  <section id="vocabSection" class="section"><div class="card"><h2 data-i18n="vocabTitle"></h2><div class="btnbar" id="vocabLevel"></div><select id="vocabTopic"></select><input id="vocabSearch" type="text"/><div id="vocabList" class="vocab-list"></div><div class="btnbar"><button id="prevPage"></button><button id="nextPage"></button></div></div></section>
</div>
<div id="langModal" class="modal"><div class="modal-card"><h3 data-i18n="menuLang"></h3><button class="lang-choice" data-lang="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ üá∫üá¶</button><button class="lang-choice" data-lang="pl">Polski üáµüá±</button><button id="langClose" style="width:100%;" data-i18n="close"></button></div></div>
<script src="tasks.js"></script>
<script>
const I18N={uk:{menu:"–ú–µ–Ω—é",menuHome:"–ì–æ–ª–æ–≤–Ω–∞",menuTheory:"–¢–µ–æ—Ä—ñ—è",menuTasks:"–ó–∞–≤–¥–∞–Ω–Ω—è",menuTest:"–¢–µ—Å—Ç",menuVerbs:"–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥—ñ—î—Å–ª–æ–≤–∞",menuVocab:"Vocabulary",menuLang:"–ú–æ–≤–∞",homeTitle:"English Learning Hub",homeText:"–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≥—Ä–∞–º–∞—Ç–∏–∫—É, —Å–ª–æ–≤–Ω–∏–∫ —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å –≤—ñ–¥ A1 –¥–æ B1.",feedback:"send a feedback/–Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –≤—ñ–¥–≥—É–∫",theoryTitle:"–¢–µ–æ—Ä—ñ—è: –∫–∞—Ç–∞–ª–æ–≥ —Ç–µ–º",taskHeader:"–ó–∞–≤–¥–∞–Ω–Ω—è",taskHint:"–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é —ñ —Ç–µ–º—É, –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.",check:"–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏",reset:"–°–∫–∏–Ω—É—Ç–∏",copy:"–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç",typeAnswer:"–í–≤–µ–¥—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å",correct:"–ü—Ä–∞–≤–∏–ª—å–Ω–æ!",wrong:"–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.",result:"–†–µ–∑—É–ª—å—Ç–∞—Ç",copied:"–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ.",testTitle:"–¢–µ—Å—Ç (30)",showResult:"–ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç",verbsTitle:"–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥—ñ—î—Å–ª–æ–≤–∞",search:"–ü–æ—à—É–∫...",translation:"–ü–µ—Ä–µ–∫–ª–∞–¥",vocabTitle:"Vocabulary",vocabSearch:"–ü–æ—à—É–∫ —Å–ª–æ–≤–∞ –∞–±–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É",prev:"–ù–∞–∑–∞–¥",next:"–î–∞–ª—ñ",close:"–ó–∞–∫—Ä–∏—Ç–∏",use:"–í–∂–∏–≤–∞–Ω–Ω—è",affirmative:"–°—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è",negative:"–ó–∞–ø–µ—Ä–µ—á–µ–Ω–Ω—è",question:"–ü–∏—Ç–∞–Ω–Ω—è",markers:"–ú–∞—Ä–∫–µ—Ä–∏",examples:"–ü—Ä–∏–∫–ª–∞–¥–∏",catalogBack:"‚Üê –ù–∞–∑–∞–¥ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É",chooseGroup:"–ö—Ä–æ–∫ 1: –∫–∞—Ç–µ–≥–æ—Ä—ñ—è",chooseTopic:"–ö—Ä–æ–∫ 2: —Ç–µ–º–∞",groups:{present:"Present",past:"Past",future:"Future",grammar:"Grammar"}},pl:{menu:"Menu",menuHome:"Strona g≈Ç√≥wna",menuTheory:"Teoria",menuTasks:"Zadania",menuTest:"Test",menuVerbs:"Czasowniki nieregularne",menuVocab:"Vocabulary",menuLang:"Jƒôzyk",homeTitle:"English Learning Hub",homeText:"ƒÜwicz gramatykƒô, s≈Çownictwo i sprawdzaj postƒôpy od A1 do B1.",feedback:"send a feedback/–Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –≤—ñ–¥–≥—É–∫",theoryTitle:"Teoria: katalog temat√≥w",taskHeader:"Zadania",taskHint:"Wybierz kategoriƒô i temat, a potem sprawd≈∫ odpowiedzi.",check:"Sprawd≈∫",reset:"Reset",copy:"Kopiuj wynik",typeAnswer:"Wpisz odpowied≈∫",correct:"Poprawnie!",wrong:"Niepoprawnie.",result:"Wynik",copied:"Skopiowano.",testTitle:"Test (30)",showResult:"Poka≈º wynik",verbsTitle:"Czasowniki nieregularne",search:"Szukaj...",translation:"T≈Çumaczenie",vocabTitle:"Vocabulary",vocabSearch:"Szukaj s≈Çowa lub t≈Çumaczenia",prev:"Poprzednia",next:"Nastƒôpna",close:"Zamknij",use:"U≈ºycie",affirmative:"Twierdzenie",negative:"Przeczenie",question:"Pytanie",markers:"Sygna≈Çy",examples:"Przyk≈Çady",catalogBack:"‚Üê Wr√≥ƒá do katalogu",chooseGroup:"Krok 1: kategoria",chooseTopic:"Krok 2: temat",groups:{present:"Present",past:"Past",future:"Future",grammar:"Grammar"}}};
const $=(s)=>document.querySelector(s); const $$=(s)=>document.querySelectorAll(s); const sections={home:$('#homeSection'),theory:$('#theorySection'),tasks:$('#tasksSection'),test:$('#testSection'),verbs:$('#verbsSection'),vocab:$('#vocabSection')};
let lang=localStorage.getItem('hwLang')||'uk'; let currentTense='presentSimple'; let currentGroup='present'; let currentTheoryTopic=null; let vocabLevel='A1',vocabTopic='',page=0; const PAGE=50;
const timeGroups={present:['presentSimple','presentContinuous','presentPerfect','presentPerfectContinuous'],past:['pastSimple','pastContinuous','pastPerfect','pastPerfectContinuous'],future:['futureSimple','futureContinuous','futurePerfect','futurePerfectContinuous'],grammar:['eitherNeither','muchMany']};
const menuBtn=$('#menuBtn'),menu=$('#menu');
function t(k){return k.split('.').reduce((a,p)=>a?.[p],I18N[lang])||k;}
function getTopicLabel(key){return HW.tenses[key]?.label||key;}
function applyI18n(){document.documentElement.lang=lang; menuBtn.textContent=`‚ò∞ ${t('menu')}`; $$('[data-i18n]').forEach(el=>el.textContent=t(el.dataset.i18n)); $('#feedbackLink').textContent=t('feedback'); $('#checkBtn').textContent=t('check'); $('#resetBtn').textContent=t('reset'); $('#copyBtn').textContent=t('copy'); $('#testBtn').textContent=t('showResult'); $('#testTitle').textContent=t('testTitle'); $('#verbSearch').placeholder=t('search'); $('#translationCol').textContent=t('translation'); $('#vocabSearch').placeholder=t('vocabSearch'); $('#prevPage').textContent=`‚Üê ${t('prev')}`; $('#nextPage').textContent=`${t('next')} ‚Üí`; renderTheory(); renderTaskSelectors(); renderTasks(); renderVerbs($('#verbSearch').value||''); renderVocabControls(); renderTest(); }
function setSection(name){Object.entries(sections).forEach(([k,el])=>el.classList.toggle('active',k===name)); closeMenu(); window.scrollTo({top:0,behavior:'auto'});} 
function closeMenu(){menu.classList.remove('open');menuBtn.setAttribute('aria-expanded','false');}
menuBtn.addEventListener('click',()=>{const open=!menu.classList.contains('open');menu.classList.toggle('open',open);menuBtn.setAttribute('aria-expanded',String(open));});
menu.addEventListener('click',(e)=>{const b=e.target.closest('button[data-go]'); if(!b) return; setSection(b.dataset.go);}); document.addEventListener('click',(e)=>{if(!menu.contains(e.target)&&!menuBtn.contains(e.target)) closeMenu();});
const langModal=$('#langModal'); $('#langOpenBtn').addEventListener('click',()=>{langModal.classList.add('open'); closeMenu();}); $('#langClose').addEventListener('click',()=>langModal.classList.remove('open')); langModal.addEventListener('click',(e)=>{if(e.target===langModal)langModal.classList.remove('open');}); $$('.lang-choice').forEach(b=>b.addEventListener('click',()=>{lang=b.dataset.lang; localStorage.setItem('hwLang',lang); applyI18n(); langModal.classList.remove('open');}));
const normalize=(v)=>String(v||'').replace(/¬†/g,' ').replace(/[‚Äô‚Äò]/g,"'").replace(/[‚Äú‚Äù]/g,'"').replace(/[.,!?;:]+$/g,'').replace(/\s+/g,' ').trim().toLowerCase();
function renderTheory(){const c=$('#theoryCatalog'); const view=$('#theoryTopicView'); c.style.display='grid'; view.style.display='none'; c.className='catalog-grid'; c.innerHTML=''; Object.entries(HW.tenses).forEach(([key,ts])=>{const b=document.createElement('button'); b.textContent=ts.label; b.onclick=()=>openTheoryTopic(key); c.appendChild(b);});}
function openTheoryTopic(key){currentTheoryTopic=key; const ts=HW.tenses[key]; const c=$('#theoryCatalog'); const view=$('#theoryTopicView'); c.style.display='none'; view.style.display='block'; view.innerHTML=`<button class='catalog-back' id='theoryBack'>${t('catalogBack')}</button><div class='card'><h3>${ts.label}</h3><p><b>${t('use')}:</b> ${ts.use[lang]}</p><p><b>${t('affirmative')}:</b> ${ts.formula.affirmative}<br><b>${t('negative')}:</b> ${ts.formula.negative}<br><b>${t('question')}:</b> ${ts.formula.question}</p><p><b>${t('markers')}:</b> ${ts.markers.join(', ')}</p><p><b>${t('examples')}:</b><br>${ts.examples.map(e=>`${e.en} ‚Äî ${e[lang]}`).join('<br>')}</p></div>`; $('#theoryBack').onclick=()=>{currentTheoryTopic=null; renderTheory();};}
function renderTaskSelectors(){const box=$('#tasksCatalog'); box.innerHTML=''; const groupWrap=document.createElement('div'); groupWrap.className='catalog-wrap'; groupWrap.innerHTML=`<strong>${t('chooseGroup')}</strong><div id='timeButtons' class='catalog-grid'></div>`; const topicWrap=document.createElement('div'); topicWrap.className='catalog-wrap'; topicWrap.innerHTML=`<strong>${t('chooseTopic')}</strong><div id='formButtons' class='catalog-grid'></div>`; box.appendChild(groupWrap); box.appendChild(topicWrap); const tb=$('#timeButtons'); Object.keys(timeGroups).forEach(g=>{const b=document.createElement('button'); b.textContent=t(`groups.${g}`); b.onclick=()=>{currentGroup=g; [...tb.children].forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderForms(g);}; tb.appendChild(b); if(g===currentGroup)b.classList.add('active');}); renderForms(currentGroup);}
function renderForms(group){const fb=$('#formButtons'); fb.innerHTML=''; (timeGroups[group]||[]).forEach((k)=>{const b=document.createElement('button'); b.textContent=getTopicLabel(k); b.onclick=()=>{currentTense=k; [...fb.children].forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderTasks();}; fb.appendChild(b); if(k===currentTense)b.classList.add('active');}); if(!timeGroups[group].includes(currentTense)){currentTense=timeGroups[group][0]; fb.firstChild?.classList.add('active');} } 
function isAccepted(task,ans){if(task.type==='mcq') return Number(ans)===task.correctIndex; return (task.accept||[]).map(normalize).includes(normalize(ans));}
function renderTasks(){const list=$('#tasksList'); list.innerHTML=''; const tasks=HW.taskSets[currentTense]||[]; $('#taskTitle').textContent=`${t('taskHeader')} ‚Äî ${getTopicLabel(currentTense)}`; tasks.forEach(ts=>{const card=document.createElement('div'); card.className='card task-card'; let html=`<div><b>${ts.prompt}</b></div>`; if(ts.type==='fill') html+=`<input type='text' data-answer='${ts.id}' placeholder='${t('typeAnswer')}'/>`; else html+=ts.options.map((o,i)=>`<label class='task-option'><input type='radio' name='${ts.id}' value='${i}'/> ${o}</label>`).join(''); html+=`<div class='result' data-result='${ts.id}'></div>`; card.innerHTML=html; list.appendChild(card);}); $('#overall').style.display='none';}
$('#checkBtn').addEventListener('click',()=>{const tasks=HW.taskSets[currentTense]||[]; let score=0; tasks.forEach(ts=>{const ans=ts.type==='fill' ? $(`input[data-answer='${ts.id}']`)?.value : $(`input[name='${ts.id}']:checked`)?.value; const ok=isAccepted(ts,ans); const r=$(`[data-result='${ts.id}']`); r.style.display='block'; r.className='result '+(ok?'ok':'bad'); const extra=!ok&&ts.explanation?` ${ts.explanation}`:''; r.textContent=ok?t('correct'):`${t('wrong')}${extra}`; if(ok)score++;}); const o=$('#overall'); o.style.display='block'; o.className='result '+(score===tasks.length?'ok':'bad'); o.textContent=`${t('result')}: ${score}/${tasks.length}`;});
$('#resetBtn').addEventListener('click',renderTasks); $('#copyBtn').addEventListener('click',async()=>{const tasks=HW.taskSets[currentTense]||[]; const lines=[`${t('taskHeader')} ${getTopicLabel(currentTense)}`]; tasks.forEach(ts=>{const ans=ts.type==='fill' ? $(`input[data-answer='${ts.id}']`)?.value||'' : $(`input[name='${ts.id}']:checked`)?.value??''; lines.push(`${ts.id}: ${ans}`);}); await navigator.clipboard.writeText(lines.join('\n')); alert(t('copied'));});
function renderTest(){const list=$('#testList'); list.innerHTML=''; HW.testQuestions.forEach(q=>{const c=document.createElement('div'); c.className='card'; let html=`<div><b>${q.question}</b> <small>(${q.level})</small></div>`; if(q.type==='mcq') html+=q.options.map((o,i)=>`<label><input type='radio' name='${q.id}' value='${i}'/> ${o}</label>`).join('<br>'); else html+=`<input type='text' data-test='${q.id}'/>`; c.innerHTML=html; list.appendChild(c);}); }
$('#testBtn').addEventListener('click',()=>{let s=0; HW.testQuestions.forEach(q=>{if(q.type==='mcq'){if(Number($(`input[name='${q.id}']:checked`)?.value)===q.answer) s++;} else if(normalize($(`input[data-test='${q.id}']`)?.value)===normalize(q.answerText)) s++;}); $('#testResult').textContent=`Score: ${s}/30`;});
function renderVerbs(filter=''){const body=$('#verbsBody'); body.innerHTML=''; HW.irregularVerbs.filter(v=>`${v.base} ${v.past} ${v.pp} ${v.uk} ${v.pl}`.toLowerCase().includes(filter.toLowerCase())).forEach(v=>{const tr=document.createElement('tr'); tr.innerHTML=`<td>${v.base}</td><td>${v.past}</td><td>${v.pp}</td><td>${v[lang]}</td>`; body.appendChild(tr);});}
$('#verbSearch').addEventListener('input',e=>renderVerbs(e.target.value));
function renderVocabControls(){const box=$('#vocabLevel'); box.innerHTML=''; Object.keys(HW.vocabulary).forEach(l=>{const b=document.createElement('button'); b.textContent=l; b.onclick=()=>{vocabLevel=l; page=0; [...box.children].forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderTopicSelect();}; if(l===vocabLevel)b.classList.add('active'); box.appendChild(b);}); renderTopicSelect();}
function renderTopicSelect(){const sel=$('#vocabTopic'); sel.innerHTML=''; Object.keys(HW.vocabulary[vocabLevel]).forEach(tp=>{const op=document.createElement('option'); op.value=tp; op.textContent=tp; sel.appendChild(op);}); vocabTopic=sel.value; renderVocab();}
$('#vocabTopic').addEventListener('change',e=>{vocabTopic=e.target.value; page=0; renderVocab();}); $('#vocabSearch').addEventListener('input',()=>{page=0; renderVocab();});
function getActiveVocabularyLang(){const src=localStorage.getItem('hwLang')||lang||'uk'; return src==='pl'?'pl':'ua';}
function getVocabularyTranslation(entry,currentLang=getActiveVocabularyLang()){const ua=entry.ua||entry.uk||''; const pl=entry.pl||''; if(currentLang==='pl'&&pl) return pl; if(ua) return ua; if(pl) return pl; return entry.en||'';}
function renderVocab(){const q=normalize($('#vocabSearch').value); const currentLang=getActiveVocabularyLang(); let words=HW.vocabulary[vocabLevel][vocabTopic]||[]; if(q) words=words.filter(w=>normalize(w.en).includes(q)||normalize(getVocabularyTranslation(w,currentLang)).includes(q)); const start=page*PAGE; const view=words.slice(start,start+PAGE); $('#vocabList').innerHTML=view.map(w=>`<div class='vocab-item'><b>${w.en}</b> ‚Äî ${getVocabularyTranslation(w,currentLang)}</div>`).join(''); $('#prevPage').disabled=page===0; $('#nextPage').disabled=start+PAGE>=words.length; }
$('#prevPage').addEventListener('click',()=>{if(page>0){page--; renderVocab();}}); $('#nextPage').addEventListener('click',()=>{page++; renderVocab();});
applyI18n(); setSection('home');
</script>
</body>
</html>
