<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>A1‚ÄìB2 English Learning Hub</title>
  <style>
    :root { --bg:#f4f7ff; --card:#ffffffcc; --text:#0f172a; --accent:#4f7cff; --line:#d8e2ff; font-family: "SF Pro Text", system-ui, -apple-system, sans-serif; }
    * { box-sizing: border-box; }
    body { margin: 0; background: linear-gradient(180deg,#f9fbff,#eef3ff); color: var(--text); }
    .topbar { position: sticky; top: 0; z-index: 30; backdrop-filter: blur(12px); background: #f8fbffcc; border-bottom:1px solid var(--line); }
    .topbar-inner { max-width: 1100px; margin:0 auto; padding: 10px 16px; display:flex; align-items:center; justify-content:space-between; position:relative; }
    .menu-btn, button, .link-btn { min-height:44px; border-radius:14px; border:1px solid var(--line); background:#fff; color:var(--text); padding:10px 14px; font-weight:600; cursor:pointer; transition:.2s transform,.2s background,.2s box-shadow; }
    button:active,.menu-btn:active,.link-btn:active { transform: scale(.98); }
    .menu-btn { background: var(--accent); color:#fff; border-color: transparent; }
    .menu { position:absolute; top:58px; right:16px; width:min(280px,80vw); background:#fff; border:1px solid var(--line); border-radius:16px; padding:8px; box-shadow:0 12px 30px #0f172a22; opacity:0; pointer-events:none; transform:translateY(-6px); transition:.2s; }
    .menu.open { opacity:1; pointer-events:auto; transform:translateY(0); }
    .menu button { width:100%; text-align:left; margin-bottom:6px; }
    .wrap { max-width:1100px; margin:0 auto; padding:18px 14px 30px; }
    .section { display:none; animation: fade .25s ease; }
    .section.active { display:block; }
    @keyframes fade { from {opacity:0; transform:translateY(6px);} to {opacity:1; transform:translateY(0);} }
    .card { background:var(--card); border:1px solid var(--line); border-radius:18px; padding:16px; margin:10px 0; box-shadow:0 10px 24px #8ba1db1a; }
    .hero { text-align:center; min-height:58vh; display:flex; flex-direction:column; justify-content:center; gap:12px; }
    .hero h1 { font-size: clamp(28px,7vw,46px); margin:0; }
    .btnbar { display:flex; gap:8px; flex-wrap:wrap; }
    .btnbar button.active { background:var(--accent); color:#fff; border-color:transparent; }
    .grid { display:grid; gap:10px; }
    .task-card .result { display:none; margin-top:8px; padding:8px; border-radius:12px; }
    .result.ok { background:#e6f7ec; color:#0f6b35; }
    .result.bad { background:#feecec; color:#9f1d2a; }
    input[type="text"],select { width:100%; min-height:44px; border:1px solid var(--line); border-radius:12px; padding:10px; font-size:16px; }
    .table-wrap { overflow:auto; max-height:65vh; border-radius:12px; border:1px solid var(--line); }
    table { width:100%; border-collapse:collapse; background:#fff; }
    th,td { padding:10px; border-bottom:1px solid #edf1ff; text-align:left; white-space:nowrap; }
    .vocab-list { max-height:55vh; overflow:auto; }
    .vocab-item { padding:8px 10px; border-bottom:1px solid #eef2ff; }
    @media (max-width: 480px) { .topbar-inner{padding:10px;} .card{padding:12px;} }
  </style>
</head>
<body>
<nav class="topbar">
  <div class="topbar-inner">
    <strong>üìò A1‚ÄìB2 English</strong>
    <button id="menuBtn" class="menu-btn" aria-expanded="false">‚ò∞ –ú–µ–Ω—é</button>
    <div id="menu" class="menu">
      <button data-go="home">üè† Home</button>
      <button data-go="theory">üìö –¢–µ–æ—Ä—ñ—è</button>
      <button data-go="tasks">‚úçÔ∏è –ó–∞–≤–¥–∞–Ω–Ω—è</button>
      <button data-go="test">üß™ –¢–µ—Å—Ç</button>
      <button data-go="verbs">üîÅ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥—ñ—î—Å–ª–æ–≤–∞</button>
      <button data-go="vocab">üóÇÔ∏è Vocabulary</button>
    </div>
  </div>
</nav>

<div class="wrap">
  <section id="homeSection" class="section active">
    <div class="card hero">
      <h1>English Learning Hub</h1>
      <p>Practice grammar, build vocabulary, and check your progress from A1 to B2.</p>
      <div style="display:flex;justify-content:center;">
        <a class="link-btn" href="mailto:mailoftheshop@gmail.com?subject=A2%20English%20Feedback">Send a feedback / –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –≤—ñ–¥–≥—É–∫</a>
      </div>
    </div>
  </section>

  <section id="theorySection" class="section"><div class="card"><h2>–ß–∞—Å–∏ —ñ —ó—Ö —Ñ–æ—Ä–º–∏</h2><div id="theoryCatalog"></div></div></section>

  <section id="tasksSection" class="section">
    <div class="card">
      <h2 id="taskTitle">Homework</h2>
      <div class="btnbar" id="timeButtons"></div>
      <div class="btnbar" id="formButtons"></div>
      <div class="btnbar"><button id="checkBtn">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button><button id="resetBtn">–°–∫–∏–Ω—É—Ç–∏</button><button id="copyBtn">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button></div>
      <div id="tasksList" class="grid"></div>
      <div id="overall" class="result"></div>
    </div>
  </section>

  <section id="testSection" class="section"><div class="card"><h2>–¢–µ—Å—Ç (30)</h2><div id="testList" class="grid"></div><button id="testBtn">–î–∏–≤–∏—Ç–∏—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button><div id="testResult" style="margin-top:10px;font-weight:700;"></div></div></section>

  <section id="verbsSection" class="section"><div class="card"><h2>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥—ñ—î—Å–ª–æ–≤–∞</h2><input id="verbSearch" type="text" placeholder="–ü–æ—à—É–∫..."/><div class="table-wrap"><table><thead><tr><th>Base form</th><th>Past Simple</th><th>Past Participle</th><th>–ü–µ—Ä–µ–∫–ª–∞–¥</th></tr></thead><tbody id="verbsBody"></tbody></table></div></div></section>

  <section id="vocabSection" class="section"><div class="card"><h2>Vocabulary</h2><div class="btnbar" id="vocabLevel"></div><select id="vocabTopic"></select><input id="vocabSearch" type="text" placeholder="Search word or translation"/><div id="vocabList" class="vocab-list"></div><div class="btnbar"><button id="prevPage">‚Üê Prev</button><button id="nextPage">Next ‚Üí</button></div></div></section>
</div>
<script src="tasks.js"></script>
<script>
const $ = (s)=>document.querySelector(s);
const $$ = (s)=>document.querySelectorAll(s);
const sections = {home:$('#homeSection'),theory:$('#theorySection'),tasks:$('#tasksSection'),test:$('#testSection'),verbs:$('#verbsSection'),vocab:$('#vocabSection')};
const menuBtn=$('#menuBtn'), menu=$('#menu');
function setSection(name){Object.entries(sections).forEach(([k,el])=>el&&el.classList.toggle('active',k===name));closeMenu();window.scrollTo({top:0,behavior:'smooth'});} 
function closeMenu(){menu.classList.remove('open');menuBtn.setAttribute('aria-expanded','false');}
menuBtn.addEventListener('click',()=>{const open=!menu.classList.contains('open');menu.classList.toggle('open',open);menuBtn.setAttribute('aria-expanded',String(open));});
menu.addEventListener('click',(e)=>{const b=e.target.closest('button[data-go]'); if(!b) return; setSection(b.dataset.go);});
document.addEventListener('click',(e)=>{if(!menu.contains(e.target)&&!menuBtn.contains(e.target)) closeMenu();});

const normalize=(v)=>String(v||'').replace(/\u00A0/g,' ').replace(/[‚Äô‚Äò]/g,"'").replace(/[‚Äú‚Äù]/g,'"').replace(/[.,!?;:]+$/g,'').replace(/\s+/g,' ').trim().toLowerCase();

const timeGroups={present:['presentSimple','presentContinuous','presentPerfect','presentPerfectContinuous'],past:['pastSimple','pastContinuous','pastPerfect','pastPerfectContinuous'],future:['futureSimple','futureContinuous','futurePerfect','futurePerfectContinuous']};
let currentTense='presentSimple';
function renderTheory(){const c=$('#theoryCatalog'); c.innerHTML=''; Object.values(HW.tenses).forEach(t=>{const d=document.createElement('div'); d.className='card'; d.innerHTML=`<h3>${t.label}</h3><p><b>Use:</b> ${t.signal}</p><p><b>Affirmative:</b> ${t.formula.affirmative}<br><b>Negative:</b> ${t.formula.negative}<br><b>Question:</b> ${t.formula.question}</p><p><b>Time markers:</b> ${t.markers.join(', ')}</p><p><b>Examples:</b><br>${t.examples.map(e=>`${e.en} ‚Äî ${e.uk}`).join('<br>')}</p>`; c.appendChild(d);});}
function renderTaskSelectors(){const tb=$('#timeButtons'), fb=$('#formButtons'); tb.innerHTML=''; fb.innerHTML=''; Object.keys(timeGroups).forEach(g=>{const b=document.createElement('button'); b.textContent=g; b.onclick=()=>{[...tb.children].forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderForms(g);}; tb.appendChild(b);}); tb.firstChild.classList.add('active'); renderForms('present'); }
function renderForms(group){const fb=$('#formButtons'); fb.innerHTML=''; timeGroups[group].forEach((k,i)=>{const b=document.createElement('button'); b.textContent=HW.tenses[k].label.replace(group.charAt(0).toUpperCase()+group.slice(1)+' ',''); b.onclick=()=>{[...fb.children].forEach(x=>x.classList.remove('active')); b.classList.add('active'); currentTense=k; renderTasks();}; fb.appendChild(b); if(i===0){b.classList.add('active'); currentTense=k;}}); renderTasks();}
function isAccepted(task,ans){if(task.type==='mcq') return Number(ans)===task.correctIndex; const n=normalize(ans); return (task.accept||[]).map(normalize).includes(n);} 
function renderTasks(){const list=$('#tasksList'); list.innerHTML=''; const tasks=HW.taskSets[currentTense]||[]; $('#taskTitle').textContent=`Homework ‚Äî ${HW.tenses[currentTense].label}`; tasks.forEach(t=>{const card=document.createElement('div'); card.className='card task-card'; card.dataset.id=t.id; let html=`<div><b>${t.prompt}</b></div>`; if(t.type==='fill') html+=`<input type='text' data-answer='${t.id}' placeholder='Type answer'/>`; else html+=t.options.map((o,i)=>`<label><input type='radio' name='${t.id}' value='${i}'/> ${o}</label>`).join('<br>'); html+=`<div class='result' data-result='${t.id}'></div>`; card.innerHTML=html; list.appendChild(card);}); $('#overall').style.display='none';}
$('#checkBtn').addEventListener('click',()=>{const tasks=HW.taskSets[currentTense]||[]; let score=0; tasks.forEach(t=>{const ans=t.type==='fill' ? $(`input[data-answer='${t.id}']`)?.value : $(`input[name='${t.id}']:checked`)?.value; const ok=isAccepted(t,ans); const r=$(`[data-result='${t.id}']`); r.style.display='block'; r.className='result '+(ok?'ok':'bad'); r.textContent=ok?'‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!':'‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.'; if(ok) score++;}); const o=$('#overall'); o.style.display='block'; o.className='result '+(score===tasks.length?'ok':'bad'); o.textContent=`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${score}/${tasks.length}`;});
$('#resetBtn').addEventListener('click',()=>renderTasks());
$('#copyBtn').addEventListener('click',async()=>{const tasks=HW.taskSets[currentTense]||[]; const lines=[`Homework ${HW.tenses[currentTense].label}`]; tasks.forEach(t=>{const ans=t.type==='fill' ? $(`input[data-answer='${t.id}']`)?.value||'' : $(`input[name='${t.id}']:checked`)?.value??''; lines.push(`${t.id}: ${ans}`);}); await navigator.clipboard.writeText(lines.join('\n')); alert('–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ.');});

function renderTest(){const list=$('#testList'); list.innerHTML=''; HW.testQuestions.forEach(q=>{const c=document.createElement('div'); c.className='card'; c.dataset.id=q.id; let html=`<div><b>${q.question}</b> <small>(${q.level})</small></div>`; if(q.type==='mcq') html+=q.options.map((o,i)=>`<label><input type='radio' name='${q.id}' value='${i}'/> ${o}</label>`).join('<br>'); else html+=`<input type='text' data-test='${q.id}'/>`; c.innerHTML=html; list.appendChild(c);}); }
$('#testBtn').addEventListener('click',()=>{let s=0; HW.testQuestions.forEach(q=>{if(q.type==='mcq'){if(Number($(`input[name='${q.id}']:checked`)?.value)===q.answer) s++;} else {if(normalize($(`input[data-test='${q.id}']`)?.value)===normalize(q.answerText)) s++;}}); $('#testResult').textContent=`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${s}/30`;});

function renderVerbs(filter=''){const body=$('#verbsBody'); body.innerHTML=''; HW.irregularVerbs.filter(v=>v.join(' ').toLowerCase().includes(filter.toLowerCase())).forEach(v=>{const tr=document.createElement('tr'); tr.innerHTML=`<td>${v[0]}</td><td>${v[1]}</td><td>${v[2]}</td><td>${v[3]}</td>`; body.appendChild(tr);});}
$('#verbSearch').addEventListener('input',e=>renderVerbs(e.target.value));

let vocabLevel='A1', vocabTopic='', page=0; const PAGE=50;
function renderVocabControls(){const box=$('#vocabLevel'); box.innerHTML=''; Object.keys(HW.vocabulary).forEach(l=>{const b=document.createElement('button'); b.textContent=l; b.onclick=()=>{vocabLevel=l; page=0; renderTopicSelect();}; if(l===vocabLevel)b.classList.add('active'); box.appendChild(b);}); renderTopicSelect();}
function renderTopicSelect(){const sel=$('#vocabTopic'); sel.innerHTML=''; Object.keys(HW.vocabulary[vocabLevel]).forEach(t=>{const op=document.createElement('option'); op.value=t; op.textContent=t; sel.appendChild(op);}); vocabTopic=sel.value; renderVocab();}
$('#vocabTopic').addEventListener('change',e=>{vocabTopic=e.target.value; page=0; renderVocab();}); $('#vocabSearch').addEventListener('input',()=>{page=0; renderVocab();});
function renderVocab(){const q=normalize($('#vocabSearch').value); let words=HW.vocabulary[vocabLevel][vocabTopic]||[]; if(q) words=words.filter(w=>normalize(w.en).includes(q)||normalize(w.uk).includes(q)); const start=page*PAGE; const view=words.slice(start,start+PAGE); const list=$('#vocabList'); list.innerHTML=view.map(w=>`<div class='vocab-item'><b>${w.en}</b> ‚Äî ${w.uk}</div>`).join(''); $('#prevPage').disabled=page===0; $('#nextPage').disabled=start+PAGE>=words.length;}
$('#prevPage').addEventListener('click',()=>{if(page>0){page--; renderVocab();}}); $('#nextPage').addEventListener('click',()=>{page++; renderVocab();});

renderTheory(); renderTaskSelectors(); renderTest(); renderVerbs(); renderVocabControls();
</script>
</body>
</html>
